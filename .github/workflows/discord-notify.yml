name: Notify Discord on Push

on:
  push:
    branches:
      - main

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Get formatted Thai time
        id: time
        run: |
          export TZ="Asia/Bangkok"
          echo "time=$(date '+%d/%m/%Y à¹€à¸§à¸¥à¸² %H:%M à¸™.')" >> $GITHUB_OUTPUT

      - name: Notify Discord
        uses: Ilshidur/action-discord@master
        env:
          DISCORD_WEBHOOK: ${{ secrets.Code_Alert }}
        with:
          args: |
            --webhook "${{ secrets.Code_Alert }}" 
            "**ğŸ“¦ à¹‚à¸›à¸£à¹€à¸ˆà¸à¸•à¹Œ:** `${{ github.repository }}`\n\
            **ğŸ“ Branch:** `${{ github.ref_name }}`\n\
            **ğŸš€ à¹‚à¸„à¹‰à¸”à¸–à¸¹à¸ push à¹‚à¸”à¸¢:** `${{ github.actor }}`\n\
            ğŸ“ Commit: `${{ github.event.head_commit.message }}`\n\
            ğŸ“Œ [à¸”à¸¹ commit](${{ github.event.head_commit.url }})\n\
            ğŸ•’ à¹€à¸§à¸¥à¸²: `${{ steps.time.outputs.time }}`\n\
            <@&1390556493798965308>"