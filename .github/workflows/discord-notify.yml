name: Notify Discord on Push

on:
  push:
    branches:
      - main

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: à¹à¸›à¸¥à¸‡à¸§à¸±à¸™à¸—à¸µà¹ˆà¹€à¸›à¹‡à¸™à¸ à¸²à¸©à¸²à¹„à¸—à¸¢
        id: time
        run: |
          export TZ="Asia/Bangkok"
          DAY=$(date '+%-d')
          MONTH_NUM=$(date '+%-m')
          YEAR=$(date '+%Y')
          TIME=$(date '+%H:%M')

          # à¹à¸›à¸¥à¸‡à¹€à¸”à¸·à¸­à¸™à¹€à¸›à¹‡à¸™à¸ à¸²à¸©à¸²à¹„à¸—à¸¢
          MONTH_TH=(à¸¡à¸à¸£à¸²à¸„à¸¡ à¸à¸¸à¸¡à¸ à¸²à¸à¸±à¸™à¸˜à¹Œ à¸¡à¸µà¸™à¸²à¸„à¸¡ à¹€à¸¡à¸©à¸²à¸¢à¸™ à¸à¸¤à¸©à¸ à¸²à¸„à¸¡ à¸¡à¸´à¸–à¸¸à¸™à¸²à¸¢à¸™ à¸à¸£à¸à¸à¸²à¸„à¸¡ à¸ªà¸´à¸‡à¸«à¸²à¸„à¸¡ à¸à¸±à¸™à¸¢à¸²à¸¢à¸™ à¸•à¸¸à¸¥à¸²à¸„à¸¡ à¸à¸¤à¸¨à¸ˆà¸´à¸à¸²à¸¢à¸™ à¸˜à¸±à¸™à¸§à¸²à¸„à¸¡)
          MONTH_NAME=${MONTH_TH[$((MONTH_NUM - 1))]}

          # à¸ªà¸£à¹‰à¸²à¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸ªà¸¸à¸”à¸—à¹‰à¸²à¸¢
          echo "time=${DAY} ${MONTH_NAME} ${YEAR} à¹€à¸§à¸¥à¸² ${TIME} à¸™." >> $GITHUB_OUTPUT

      - name: Notify Discord
        uses: Ilshidur/action-discord@master
        env:
          DISCORD_WEBHOOK: ${{ secrets.Github }}
        with:
          args: |
            --webhook "${{ secrets.Github }}" 
            "**ğŸ“¦ à¹‚à¸›à¸£à¹€à¸ˆà¸à¸•à¹Œ:** ${{ github.event.repository.name }}
            **ğŸ“ Branch:** ${{ github.ref_name }}
            **ğŸš€ à¹‚à¸„à¹‰à¸”à¸–à¸¹à¸ push à¹‚à¸”à¸¢:** ${{ github.actor }}
            ğŸ“ Commit: ${{ github.event.head_commit.message }}
            ğŸ•’ à¹€à¸§à¸¥à¸²: ${{ steps.time.outputs.time }}
            ğŸ“Œ [à¸”à¸¹ commit](${{ github.event.head_commit.url }})
            <@&1390556493798965308>"